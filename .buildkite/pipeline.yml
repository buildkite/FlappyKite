agents:
  queue: macos

steps:
  - label: ":ruby: install dependencies"
    key: install-dependencies-ruby
    command: .buildkite/scripts/install-dependencies.sh
  - label: ":apple: build"
    key: build-apple
    command: .buildkite/scripts/build.sh
    depends_on: [install-dependencies-ruby]
  - label: ":apple: test"
    command: .buildkite/scripts/test.sh
    depends_on: [build-apple]
    artifact_paths: 
      - "fastlane/test_output/report.junit"
    agents:
      queue: macos-large
